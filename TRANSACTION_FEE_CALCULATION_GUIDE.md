# 交易手续费计算功能指南

## 🎯 功能概述

现在系统支持完整的交易手续费计算和净收入显示功能，让您能够准确记录和查看域名交易的实际收入。

## 📝 添加交易时的功能

### 1. 自动手续费计算
当您填写平台手续费百分比时，系统会自动计算手续费金额：

**示例：**
- 销售价格：¥1,000
- 平台手续费：5%
- 系统自动计算：手续费 = ¥1,000 × 5% = ¥50

### 2. 实时净收入显示
在交易表单中，当选择"Sale"类型时，系统会实时显示净收入计算结果：

```
净收入计算
¥950.00
总金额: ¥1,000.00 - 手续费: ¥50.00
```

### 3. 自动保存净收入
提交交易时，系统会自动计算并保存净收入：
- 净收入 = 总金额 - 手续费
- 数据保存到 `net_amount` 字段

## 📊 交易记录显示

### 1. 完整金额信息
在交易记录列表中，每个销售交易都会显示：

**主要信息：**
- **总金额**：¥1,000.00（销售价格）

**详细信息（仅销售交易显示）：**
- **净收入**：¥950.00（实际收到的钱）
- **手续费**：¥50.00（平台收取的费用）

### 2. 显示逻辑
- 只有 `type === 'sell'` 且 `platform_fee > 0` 的交易才显示净收入
- 净收入 = `net_amount` 或 `amount - platform_fee`
- 手续费信息以灰色小字显示

## 🔧 使用步骤

### 步骤1：添加销售交易
1. 点击"Add Transaction"
2. 选择交易类型为"Sale"
3. 填写销售金额：¥1,000
4. 填写平台手续费百分比：5%
5. 系统自动显示净收入：¥950

### 步骤2：查看计算结果
在表单底部会看到绿色的净收入计算卡片：
```
净收入计算
¥950.00
总金额: ¥1,000.00 - 手续费: ¥50.00
```

### 步骤3：保存交易
点击"Save"后，系统会：
- 自动计算 `net_amount = 1000 - 50 = 950`
- 保存完整的交易信息

### 步骤4：查看交易记录
在交易列表中，该交易会显示：
```
¥1,000.00
净收入: ¥950.00 (手续费: ¥50.00)
```

## 💡 实际应用场景

### 场景1：GoDaddy销售
- 销售价格：$500
- GoDaddy手续费：2.9%
- 手续费：$14.50
- 净收入：$485.50

### 场景2：Namecheap销售
- 销售价格：$1,200
- Namecheap手续费：4%
- 手续费：$48.00
- 净收入：$1,152.00

### 场景3：Sedo销售
- 销售价格：€800
- Sedo手续费：10%
- 手续费：€80.00
- 净收入：€720.00

## 🎨 界面特性

### 1. 实时计算
- 输入手续费百分比时立即计算手续费金额
- 实时更新净收入显示
- 无需手动计算

### 2. 视觉提示
- 净收入计算卡片使用绿色主题
- 清晰显示计算公式
- 突出显示实际收入

### 3. 数据完整性
- 自动保存所有计算字段
- 支持编辑和重新计算
- 历史数据保持准确性

## 🔍 技术实现

### 1. 自动计算逻辑
```typescript
// 手续费计算
const calculatedFee = (amount * percentage) / 100;

// 净收入计算
const netAmount = amount - platformFee;
```

### 2. 数据存储
```typescript
interface Transaction {
  amount: number;           // 总金额
  platform_fee: number;    // 手续费金额
  platform_fee_percentage: number; // 手续费百分比
  net_amount: number;      // 净收入
}
```

### 3. 显示逻辑
```typescript
// 仅销售交易显示净收入
{transaction.type === 'sell' && transaction.platform_fee > 0 && (
  <div>净收入: {netAmount}</div>
)}
```

## ✅ 功能优势

1. **准确性**：自动计算，避免人工错误
2. **实时性**：输入时立即显示结果
3. **完整性**：保存所有相关数据
4. **可视化**：清晰显示计算过程
5. **灵活性**：支持不同平台的手续费率

现在您可以准确记录和查看域名交易的实际收入了！🎉

'use client';

import { useState, useEffect } from 'react';

type Locale = 'zh' | 'en';

interface Translations {
  [key: string]: string | Translations;
}

// 翻译数据
const translations: Record<Locale, Translations> = {
  zh: {
    platform: {
      name: '66Do',
      subtitle: '域名投资平台'
    },
    nav: {
      signIn: '登录',
      signUp: '注册',
      goToDashboard: '进入仪表板',
    },
    navigation: {
      signIn: '登录',
      signUp: '注册',
      signOut: '退出登录',
      overview: '概览',
      domains: '域名',
      transactions: '交易',
      analytics: '分析',
      alerts: '即将到期',
      settings: '设置',
    data: '数据'
  },
  data: {
    dataManagement: '数据管理',
    dataManagementDescription: '导入、导出和备份您的域名投资数据',
    import: '数据导入',
    export: '数据导出',
    backup: '备份恢复',
    importInstructions: '导入说明',
    importDescription: '支持 JSON 和 CSV 格式。请确保数据包含域名、购买日期、购买价格等必需字段。',
    selectFile: '选择文件',
    fileDescription: '支持 JSON 和 CSV 格式，最大 10MB',
    processing: '处理中...',
    importSuccess: '数据导入成功',
    importSuccessCount: '成功导入 {count} 条记录',
    importFailed: '导入失败',
    unknownError: '未知错误',
    errorDetails: '错误详情',
    excelNotSupported: 'Excel 文件暂不支持，请转换为 CSV 格式',
    unsupportedFormat: '不支持的文件格式',
    invalidFormat: '数据格式不正确',
    mustContainDomains: '数据必须包含 domains 数组',
    rowFormatError: '第 {row} 行数据格式错误',
    missingRequiredField: '第 {row} 行缺少必需字段: {field}',
    jsonFormat: 'JSON 格式',
    jsonDescription: '导出为 JSON 格式，包含完整的域名和交易数据，适合备份和迁移。',
    exportJson: '导出 JSON',
    csvFormat: 'CSV 格式',
    csvDescription: '导出为 CSV 格式，适合在 Excel 或其他表格软件中查看和编辑。',
    exportCsv: '导出 CSV',
    notes: '注意事项',
    exportNote1: '导出的数据包含所有域名和交易记录',
    exportNote2: '敏感信息如密码不会包含在导出文件中',
    exportNote3: '建议定期备份数据以防丢失',
    createBackup: '创建备份',
    createBackupDescription: '创建完整的数据备份，包含所有域名、交易记录和用户设置。',
    restoreBackup: '恢复备份',
    restoreBackupDescription: '从备份文件恢复数据，将覆盖当前所有数据。',
    importantWarning: '重要警告',
    restoreWarning: '恢复备份将完全替换当前数据，此操作不可撤销。请确保在恢复前已创建当前数据的备份。'
  },
  reports: {
    allTime: '全部时间',
    thisYear: '今年',
    last6Months: '过去6个月',
    last3Months: '过去3个月',
    thisMonth: '本月',
    domainStatistics: '域名统计',
    activeDomains: '活跃域名',
    soldDomains: '已售域名',
    averageHoldingPeriod: '平均持有期',
    performanceAnalysis: '表现分析',
    bestPerforming: '最佳表现',
    worstPerforming: '最差表现',
    uncategorized: '未分类',
    financialAnalysis: '财务分析',
    advancedPortfolioAnalysis: '高级投资组合分析和洞察',
    overall: '总体',
    performance: '表现',
    risk: '风险',
    historicalRatesAnalysis: '历史汇率分析',
    baseCurrency: '基础货币',
    analysisDate: '分析日期'
  },
  settings: {
    language: '语言',
    chinese: '中文',
    english: 'English',
    timezone: '时区',
    theme: '主题',
    lightTheme: '浅色',
    darkTheme: '深色',
    autoTheme: '自动',
    notificationTypes: '通知类型',
    emailNotifications: '邮件通知',
    pushNotifications: '推送通知',
    renewalReminders: '续费提醒',
    saleOpportunities: '出售机会',
    priceAlerts: '价格提醒',
    weeklyReports: '周报',
    profileVisibility: '资料可见性',
    public: '公开',
    friendsOnly: '仅好友',
    private: '私密',
    showStats: '显示统计数据',
    showStatsDesc: '允许其他用户查看你的投资统计',
    showPortfolio: '显示投资组合',
    showPortfolioDesc: '允许其他用户查看你的域名列表',
    allowAnalytics: '允许数据分析',
    allowAnalyticsDesc: '帮助改进产品功能',
    defaultCurrency: '默认货币',
    riskTolerance: '风险承受能力',
    conservative: '保守型',
    conservativeDesc: '偏好稳定收益',
    balanced: '平衡型',
    balancedDesc: '风险与收益平衡',
    aggressive: '激进型',
    aggressiveDesc: '追求高收益',
    priceAlertThreshold: '价格提醒阈值',
    priceAlertThresholdDesc: '当域名价值变化超过此百分比时提醒',
    autoRenewal: '自动续费',
    autoRenewalDesc: '域名到期时自动续费',
    defaultView: '默认视图',
    gridView: '网格视图',
    listView: '列表视图',
    itemsPerPage: '每页显示数量',
    showAdvancedStats: '显示高级统计',
    showAdvancedStatsDesc: '显示详细的投资分析数据',
    compactMode: '紧凑模式',
    compactModeDesc: '减少界面间距，显示更多内容'
  },
    dashboard: {
      title: '域名投资仪表板',
      welcome: '欢迎回来',
      totalInvestments: '总投资',
      purchaseCost: '购买成本',
      totalRevenue: '总收入',
      totalProfit: '净利润',
      roi: '投资回报率',
      profitMargin: '利润率',
      afterFees: '已扣除手续费',
      addInvestment: '添加域名',
      editInvestment: '编辑域名',
      deleteInvestment: '删除域名',
      investmentName: '域名名称',
      investmentAmount: '投资金额',
      investmentNamePlaceholder: '例如：example.com、mydomain.net等',
      cancel: '取消',
      add: '添加',
      save: '保存',
      delete: '删除',
      confirm: '确认',
      noInvestments: '还没有添加任何域名',
      addFirstInvestment: '添加第一个域名',
      signOut: '退出登录',
      overview: '概览',
      domains: '域名',
      transactions: '交易',
      analytics: '分析',
      alerts: '即将到期',
      settings: '设置',
      data: '数据',
      reports: '报告',
      userSettings: '用户设置',
      reset: '重置',
      saving: '保存中...',
      saveSettings: '保存设置',
      generalSettings: '基本设置',
      notificationSettings: '通知设置',
      privacySettings: '隐私设置',
      investmentSettings: '投资偏好',
      displaySettings: '显示设置',
      currencySettings: '货币设置',
      baseCurrency: '基础货币',
      currencyRates: '汇率',
      totalDomains: '总域名数',
      active: '活跃',
      sold: '出售',
      totalInvestment: '总投资',
      average: '平均',
      averageSalePrice: '平均售价',
      renewalCost: '续费成本',
      annualCost: '年度成本',
      totalHoldingCost: '总持有成本',
      purchaseRenewal: '购买 + 续费',
      renewalCount: '续费次数',
      renewals: '续费',
      saleDate: '出售日期',
      salePrice: '出售价格',
      profit: '利润',
      shareResults: '分享投资成果',
      bestPerformance: '最佳表现',
      bestInvestment: '最佳投资域名',
      needAttention: '需要关注',
      expiringSoon: '即将到期',
      quickActions: '快速操作',
      addDomain: '添加域名',
      addTransaction: '添加交易'
    },
    common: {
      search: '搜索',
      filter: '筛选',
      sort: '排序',
      view: '视图',
      grid: '网格',
      list: '列表',
      all: '全部',
      active: '活跃',
      forSale: '待售',
      sold: '已售',
      expired: '已过期',
      critical: '紧急',
      urgent: '紧急',
      normal: '正常',
      today: '今天',
      daysLeft: '天到期',
      expiredDays: '已过期',
      edit: '编辑',
      renew: '续费',
      delete: '删除',
      save: '保存',
      cancel: '取消',
      confirm: '确认',
      close: '关闭',
      loading: '加载中...',
      noData: '暂无数据',
      addFirst: '添加第一个',
      recentTransactions: '最近交易',
      expiringDomains: '即将到期的域名',
      noExpiringDomains: '暂无即将到期的域名',
      noTransactions: '暂无交易记录',
      addFirstTransaction: '添加第一笔交易',
      financialReports: '财务报告',
      gridView: '网格视图',
      listView: '列表视图',
      dataSource: '数据源',
      cloudDatabase: '云端数据库',
      cache: '缓存',
      verifyingIdentity: '正在验证您的身份...',
      searchDomains: '搜索域名...',
      sortByDate: '按日期',
      sortByName: '按名称',
      sortByValue: '按价值',
      // Sale Success Modal
      saleSuccess: '出售成功！',
      domainSoldSuccessfully: '已成功出售',
      netProfit: '净利润',
      returnOnInvestment: '投资回报率',
      holdingPeriod: '持有时间',
      shareImagePreview: '分享图片预览',
      generating: '生成中...',
      generateShareImage: '生成分享图片',
      shareToSocialMedia: '分享到社交媒体',
      downloadImage: '下载图片',
      wechat: '微信',
      copiedToClipboard: '内容已复制到剪贴板，可以粘贴到微信分享',
      days: '天',
      months: '个月',
      years: '年',
      year: '年',
      month: '个月',
      domainInvestmentSuccess: '分享域名投资成果',
      imagePreview: '分享图片预览',
      sortByCost: '按成本',
      allStatus: '所有状态',
      activeStatus: '活跃',
      forSaleStatus: '出售中',
      soldStatus: '已售出',
      expiredStatus: '已过期',
      profit: '利润',
      daysUntilExpiry: '到期日期',
      todayExpiry: '今天到期',
      expiredDaysAgo: '已过期',
      daysLeftExpiry: '还有',
      daysLeftExpiryEnd: '天到期',
      renewalNote: '域名 {domain} 续费 {cycle} 年',
      domainStatusUpdated: '域名状态已自动更新为"已出售"',
      dataLoadFailed: 'Failed to load data from database. Please try again.',
      dataSaveFailed: 'Failed to save data to database. Please try again.',
      dataImportFailed: 'Failed to import data',
      dataExportFailed: 'Failed to export data',
      dataBackupFailed: 'Failed to backup data',
      dataRestoreFailed: 'Failed to restore data',
      dataImportedSuccessfully: 'Data imported successfully',
      dataExportedSuccessfully: 'Data exported successfully',
      dataBackedUpSuccessfully: 'Data backed up successfully',
      dataRestoredSuccessfully: 'Data restored successfully'
    },
    financial: {
      totalSales: '总销售额',
      totalSalesDesc: '未扣除任何费用',
      platformFees: '平台手续费',
      platformFeesDesc: '总手续费',
      annualSales: '年度销售额',
      annualSalesDesc: '今年销售额',
      annualProfit: '年度净利润',
      annualProfitDesc: '扣除所有成本后',
      newFinancialMetrics: '新增财务指标卡片'
    },
    renewal: {
      analysis: '年度续费分析',
      thisYearCost: '今年续费成本',
      needRenewal: '需要续费域名',
      noRenewal: '无需续费域名',
      averageCostPerDomain: '平均成本/域名',
      cycleDistribution: '续费周期分布',
      optimizationSuggestions: '续费优化建议',
      year: '年',
      domains: '个域名',
      cost: '成本',
      suggestion: '建议'
    },
    transaction: {
      type: '交易类型',
      amount: '金额',
      currency: '货币',
      date: '日期',
      notes: '备注',
      platform: '平台',
      category: '分类',
      taxDeductible: '可抵税',
      receiptUrl: '收据链接',
      exchangeRate: '汇率',
      baseAmount: '基础金额',
      platformFee: '平台手续费',
      platformFeePercentage: '手续费百分比',
      netAmount: '净收入',
      buy: '购买',
      renew: '续费',
      sell: '出售',
      transfer: '转移',
      fee: '费用',
      marketing: '营销',
      advertising: '广告',
      installmentConfig: '分期付款配置',
      paymentPlan: '付款方式',
      lumpSum: '一次性付款',
      installment: '分期付款',
      installmentPeriod: '分期期数',
      downpaymentAmount: '首付金额',
      installmentAmount: '每期金额',
      finalPaymentAmount: '最后一期金额',
      installmentSummary: '分期付款摘要',
      downpayment: '首付',
      installmentPeriods: '分期期数',
      regularInstallment: '常规分期',
      finalPayment: '最后一期',
      totalInstallment: '分期总额',
      domainAlreadyExists: '域名已存在',
      domainAlreadyExistsDesc: '此域名已在您的投资组合中',
      selectDomain: '选择域名',
      active: '活跃',
      forSale: '待售',
      exchangeRateInfo: '汇率信息',
      exchangeRateDesc: '汇率',
      equivalentAmount: '等值',
      netIncomeCalculation: '净收入计算',
      totalAmount: '总金额',
      platformFeeDesc: '手续费',
      netIncome: '净收入',
      holding: '持有',
      addTransaction: '添加交易',
      add: '添加交易',
      editTransaction: '编辑交易',
      saveTransaction: '保存交易',
      cancelTransaction: '取消交易',
      deleteTransaction: '删除交易',
      confirmDelete: '确认删除',
      transactionDetails: '交易详情',
      financialFields: '财务字段',
      netIncomeDisplay: '净收入显示',
      year: '年',
      month: '个月',
      day: '天',
      shortTerm: '短期持有',
      mediumTerm: '中期持有',
      longTerm: '长期持有',
      veryLongTerm: '超长期持有'
    },
    analytics: {
      totalInvestment: '总投资',
      totalRevenue: '总收益',
      netProfit: '净利润',
      totalReturn: '总回报率',
      annualizedReturn: '年化收益率',
      sharpeRatio: '夏普比率',
      portfolioPerformance: '投资组合表现',
      investment: '投资',
      revenue: '收益',
      profit: '利润',
      portfolioValue: '组合价值',
      riskMetrics: '风险指标',
      riskLevel: '风险等级',
      diversificationScore: '分散化评分',
      concentrationRisk: '集中度风险',
      liquidityRisk: '流动性风险',
      investmentAdvice: '投资建议',
      portfolioPerformingWell: '投资组合表现良好，风险控制得当',
      monthlyReturnTrend: '月度收益趋势',
      monthlyReturn: '月度收益',
      domainSuffixAnalysis: '域名后缀分析',
      heldDomainSuffix: '持有域名后缀分布',
      soldDomainSuffix: '出售域名后缀分布',
      detailedStats: '详细统计',
      noHeldDomains: '暂无持有域名数据',
      noSoldDomains: '暂无出售域名数据',
      suffixComparison: '后缀对比分析',
      heldDomainRanking: '持有域名后缀排名',
      soldDomainRanking: '出售域名后缀排名',
      investmentDistribution: '投资分布',
      activeDomains: '活跃域名',
      forSaleDomains: '待售域名',
      soldDomains: '已售域名',
      expiredDomains: '已过期',
      analysisTypeSelector: '分析类型选择器',
      lowRisk: '低风险',
      mediumRisk: '中风险',
      highRisk: '高风险',
      veryHighRisk: '极高风险',
      considerDiversification: '考虑分散投资，降低单一域名占比',
      highVolatility: '投资组合波动性较高，建议增加稳定收益域名',
      lowLiquidity: '流动性不足，建议增加待售域名数量',
      lowDiversity: '域名数量较少，建议增加投资组合多样性',
      // 过期域名损失分析
      expiredDomainLoss: '过期域名损失分析',
      expiredDomainLossDesc: '因域名过期不续费造成的投资损失',
      totalLoss: '总损失',
      expiredDomainsCount: '过期域名数',
      averageLossPerDomain: '平均损失/域名',
      annualLossTrend: '年度损失趋势',
      domains: '个域名',
      expiredDomainsDetails: '过期域名详情',
      noExpiredDomains: '暂无过期域名',
      noExpiredDomainsDesc: '恭喜！您没有因域名过期造成的损失'
    },
    auth: {
      signIn: {
        title: '登录账户',
        button: '登录',
        loading: '登录中...'
      },
      signInButton: '登录',
      signInLoading: '登录中...',
      email: '邮箱地址',
      emailPlaceholder: '请输入邮箱地址',
      password: '密码',
      passwordPlaceholder: '请输入密码',
      noAccount: '还没有账户？',
      signUpNow: '立即注册',
      signUp: {
        title: '创建账户',
        button: '注册',
        loading: '注册中...'
      },
      magicLink: {
        title: 'Magic Link 登录',
        subtitle: '输入您的邮箱地址，我们将发送一个登录链接到您的邮箱',
        email: '邮箱地址',
        emailPlaceholder: '请输入您的邮箱地址',
        submit: '发送 Magic Link',
        sending: '发送中...',
        success: 'Magic Link已发送到您的邮箱！请检查邮件并点击链接登录。',
        error: '发送Magic Link失败，请重试',
        firstTime: '首次使用？Magic Link 会自动为您创建账户',
        verifying: '正在验证您的登录链接...',
        loginSuccess: '登录成功！正在跳转到您的仪表板...',
        loading: '加载中...',
        invalidLink: '无效的登录链接。请通过邮件中的链接访问。',
        loginFailed: '登录失败，请重试',
        returnToLogin: '返回登录页面'
      },
      verify: {
        title: '验证邮箱',
        subtitle: '我们已向 {email} 发送了验证码',
        code: '验证码',
        codeHint: '请输入6位数字验证码',
        submit: '验证邮箱',
        verifying: '验证中...',
        resend: '没有收到验证码？重新发送',
        backToLogin: '返回登录',
        backToRegister: '返回注册页面',
        invalidCode: '请输入6位验证码',
        emailNotFound: '邮箱地址不存在，请重新注册',
        verificationFailed: '验证失败',
        wrongCode: '验证码错误',
        updateUserFailed: '更新用户状态失败',
        resendFailed: '重新发送失败，请重试',
        sendFailed: '发送失败'
      },
      registrationSuccess: '注册成功！',
      redirecting: '正在跳转到验证页面...',
      passwordsNotMatch: '密码不匹配',
      passwordTooShort: '密码长度至少8位',
      passwordMinLength: '至少8位字符',
      confirmPassword: '确认密码',
      confirmPasswordPlaceholder: '请再次输入密码',
      signUpLoading: '注册中...',
      signUpButton: '注册',
      hasAccount: '已有账户？',
      signInNow: '立即登录'
    },
    monitoring: {
      title: '域名到期监控',
      notificationTitle: '66Do 域名提醒',
      startMonitoring: '开始监控',
      stopMonitoring: '停止监控',
      checkNow: '立即检查',
      expired: '已过期',
      critical: '紧急',
      urgent: '重要',
      warning: '提醒',
      currentAlerts: '当前提醒',
      lastCheck: '最后检查',
      criticalDomainsAlert: '有 {count} 个域名即将到期！',
      urgentDomainsAlert: '有 {count} 个域名需要关注！',
      analysisFailed: '分析域名到期情况失败',
      whoisSyncComplete: 'WHOIS同步完成: 更新 {updated} 个域名, 错误 {errors} 个',
      whoisSyncFailed: 'WHOIS同步失败',
      suggestRefreshData: '建议刷新域名数据以获取最新的WHOIS信息'
    },
    alerts: {
      domainExpiryCritical: '域名 {domain} 将在 {days} 天后到期！请立即续费。',
      domainExpiryUrgent: '域名 {domain} 将在 {days} 天后到期，建议尽快续费。',
      domainExpiryWarning: '域名 {domain} 将在 {days} 天后到期。',
      allDomainsNormal: '所有域名状态正常',
      renewalCost: '续费费用',
      renewalCycle: '续费周期',
      renewNow: '立即续费',
      remindLater: '稍后提醒'
    },
    domain: {
      expiryMonitoring: '域名到期监控',
      syncWhois: '同步WHOIS',
      totalExpiring: '即将到期',
      critical: '紧急',
      high: '重要',
      medium: '注意',
      low: '提醒',
      lastUpdate: '最后更新',
      whoisVerified: 'WHOIS已验证',
      expiringDomains: '即将到期的域名',
      noExpiringDomains: '暂无即将到期的域名',
      registrar: '注册商',
      renewNow: '立即续费',
      add: '添加域名'
    },
    mobile: {
      menu: '菜单',
      close: '关闭',
      swipeToNavigate: '滑动导航',
      tapToExpand: '点击展开',
      pullToRefresh: '下拉刷新'
    },
    gesture: {
      swipeLeft: '向左滑动',
      swipeRight: '向右滑动',
      pullDown: '下拉',
      pullUp: '上拉'
    },
    responsive: {
      mobileView: '移动视图',
      tabletView: '平板视图',
      desktopView: '桌面视图'
    },
    touch: {
      tap: '点击',
      doubleTap: '双击',
      longPress: '长按',
      swipe: '滑动'
    },
    stats: {
      totalUsers: '活跃用户',
      portfolioValue: '投资组合价值',
      domainsManaged: '管理域名数',
      free: '免费使用',
      investmentCount: '投资数量'
    },
    home: {
      title: '66Do-域名投资平台',
      subtitle: '智能化的域名管理工具，帮您轻松追踪每个域名的成本、收益与表现。',
      getStarted: '开始使用',
      startJourney: '开始您的域名投资之旅',
      joinThousands: '加入域名投资者使用66Do追踪他们的域名投资组合',
      startFree: '免费开始',
      feature1: '从一个域名开始，管理你的数字资产。',
      feature2: '记录购买、出售与到期时间。',
      feature3: '已有用户开始用它管理他们的域名收藏。',
      feature4: '免费使用，持续改进中。'
    },
    features: {
      title: '核心功能',
      subtitle: '为域名持有者量身打造的智能管理工具',
      portfolio: {
        title: '域名组合管理',
        desc: '全面记录并追踪您的域名，轻松掌握动态'
      },
      analytics: {
        title: '数据分析',
        desc: '可视化分析域名表现，帮助您更好地规划决策'
      },
      data: {
        title: '智能洞察',
        desc: '通过数据趋势发现潜在机会与风险'
      },
      security: {
        title: '数据安全',
        desc: '加密存储与隔离机制，保障您的信息安全'
      }
    },
    benefits: {
      title: '为什么选择我们',
      subtitle: '简单智能的域名管理与分析工具',
      portfolio: {
        title: '域名管理',
        desc: '统一记录与追踪所有域名状态'
      },
      analytics: {
        title: '数据概览',
        desc: '一目了然地了解你的域名表现'
      },
      market: {
        title: '灵感与趋势',
        desc: '优化成本，发现买卖机会'
      }
    },
    footer: {
      description: '专业的域名投资管理平台，帮助投资者追踪投资组合、分析数据、优化收益。',
      product: '产品',
      investmentManagement: '投资管理',
      dataAnalytics: '数据分析',
      performanceTracking: '表现追踪',
      support: '支持',
      helpCenter: '帮助中心',
      contactUs: '联系我们',
      privacyPolicy: '隐私政策',
      contact: '联系方式'
    }
  },
  en: {
    platform: {
      name: '66Do',
      subtitle: 'Domain Investment Platform'
    },
    nav: {
      signIn: 'Sign In',
      signUp: 'Sign Up',
      goToDashboard: 'Go to Dashboard',
    },
    navigation: {
      signIn: 'Sign In',
      signUp: 'Sign Up',
      signOut: 'Sign Out',
      overview: 'Overview',
      domains: 'Domains',
      transactions: 'Transactions',
      analytics: 'Analytics',
      alerts: 'Expiring',
      settings: 'Settings',
    data: 'Data'
  },
  data: {
    dataManagement: 'Data Management',
    dataManagementDescription: 'Import, export and backup your domain investment data',
    import: 'Data Import',
    export: 'Data Export',
    backup: 'Backup & Restore',
    importInstructions: 'Import Instructions',
    importDescription: 'Supports JSON and CSV formats. Please ensure data contains required fields like domain name, purchase date, purchase price, etc.',
    selectFile: 'Select File',
    fileDescription: 'Supports JSON and CSV formats, max 10MB',
    processing: 'Processing...',
    importSuccess: 'Data imported successfully',
    importSuccessCount: 'Successfully imported {count} records',
    importFailed: 'Import failed',
    unknownError: 'Unknown error',
    errorDetails: 'Error Details',
    excelNotSupported: 'Excel files are not supported yet, please convert to CSV format',
    unsupportedFormat: 'Unsupported file format',
    invalidFormat: 'Invalid data format',
    mustContainDomains: 'Data must contain domains array',
    rowFormatError: 'Row {row} data format error',
    missingRequiredField: 'Row {row} missing required field: {field}',
    jsonFormat: 'JSON Format',
    jsonDescription: 'Export as JSON format, contains complete domain and transaction data, suitable for backup and migration.',
    exportJson: 'Export JSON',
    csvFormat: 'CSV Format',
    csvDescription: 'Export as CSV format, suitable for viewing and editing in Excel or other spreadsheet software.',
    exportCsv: 'Export CSV',
    notes: 'Notes',
    exportNote1: 'Exported data contains all domain and transaction records',
    exportNote2: 'Sensitive information like passwords will not be included in export files',
    exportNote3: 'Recommend regular data backup to prevent loss',
    createBackup: 'Create Backup',
    createBackupDescription: 'Create complete data backup including all domains, transaction records and user settings.',
    restoreBackup: 'Restore Backup',
    restoreBackupDescription: 'Restore data from backup file, will overwrite all current data.',
    importantWarning: 'Important Warning',
    restoreWarning: 'Restoring backup will completely replace current data, this operation cannot be undone. Please ensure you have created a backup of current data before restoring.'
  },
  reports: {
    allTime: 'All Time',
    thisYear: 'This Year',
    last6Months: 'Last 6 Months',
    last3Months: 'Last 3 Months',
    thisMonth: 'This Month',
    domainStatistics: 'Domain Statistics',
    activeDomains: 'Active Domains',
    soldDomains: 'Sold Domains',
    averageHoldingPeriod: 'Average Holding Period',
    performanceAnalysis: 'Performance Analysis',
    bestPerforming: 'Best Performing',
    worstPerforming: 'Worst Performing',
    uncategorized: 'Uncategorized',
    financialAnalysis: 'Financial Analysis',
    advancedPortfolioAnalysis: 'Advanced portfolio analysis and insights',
    overall: 'Overall',
    performance: 'Performance',
    risk: 'Risk',
    historicalRatesAnalysis: 'Historical Rates Analysis',
    baseCurrency: 'Base Currency',
    analysisDate: 'Analysis Date'
  },
  settings: {
    language: 'Language',
    chinese: '中文',
    english: 'English',
    timezone: 'Timezone',
    theme: 'Theme',
    lightTheme: 'Light',
    darkTheme: 'Dark',
    autoTheme: 'Auto',
    notificationTypes: 'Notification Types',
    emailNotifications: 'Email Notifications',
    pushNotifications: 'Push Notifications',
    renewalReminders: 'Renewal Reminders',
    saleOpportunities: 'Sale Opportunities',
    priceAlerts: 'Price Alerts',
    weeklyReports: 'Weekly Reports',
    profileVisibility: 'Profile Visibility',
    public: 'Public',
    friendsOnly: 'Friends Only',
    private: 'Private',
    showStats: 'Show Statistics',
    showStatsDesc: 'Allow other users to view your investment statistics',
    showPortfolio: 'Show Portfolio',
    showPortfolioDesc: 'Allow other users to view your domain list',
    allowAnalytics: 'Allow Analytics',
    allowAnalyticsDesc: 'Help improve product features',
    defaultCurrency: 'Default Currency',
    riskTolerance: 'Risk Tolerance',
    conservative: 'Conservative',
    conservativeDesc: 'Prefer stable returns',
    balanced: 'Balanced',
    balancedDesc: 'Balance risk and return',
    aggressive: 'Aggressive',
    aggressiveDesc: 'Pursue high returns',
    priceAlertThreshold: 'Price Alert Threshold',
    priceAlertThresholdDesc: 'Alert when domain value changes exceed this percentage',
    autoRenewal: 'Auto Renewal',
    autoRenewalDesc: 'Automatically renew domains when they expire',
    defaultView: 'Default View',
    gridView: 'Grid View',
    listView: 'List View',
    itemsPerPage: 'Items Per Page',
    showAdvancedStats: 'Show Advanced Statistics',
    showAdvancedStatsDesc: 'Display detailed investment analysis data',
    compactMode: 'Compact Mode',
    compactModeDesc: 'Reduce interface spacing to show more content'
  },
    dashboard: {
      title: 'Domain Investment Dashboard',
      welcome: 'Welcome back',
      totalInvestments: 'Total Investments',
      purchaseCost: 'Purchase Cost',
      totalRevenue: 'Total Revenue',
      totalProfit: 'Net Profit',
      roi: 'ROI',
      profitMargin: 'Profit Margin',
      afterFees: 'After fees',
      addInvestment: 'Add Domain',
      editInvestment: 'Edit Domain',
      deleteInvestment: 'Delete Domain',
      investmentName: 'Domain Name',
      investmentAmount: 'Investment Amount',
      investmentNamePlaceholder: 'e.g., example.com, mydomain.net, etc.',
      cancel: 'Cancel',
      add: 'Add',
      save: 'Save',
      delete: 'Delete',
      confirm: 'Confirm',
      noInvestments: 'No domains added yet',
      addFirstInvestment: 'Add your first domain',
      signOut: 'Sign Out',
      overview: 'Overview',
      domains: 'Domains',
      transactions: 'Transactions',
      analytics: 'Analytics',
      alerts: 'Expiring',
      settings: 'Settings',
      data: 'Data',
      reports: 'Reports',
      userSettings: 'User Settings',
      reset: 'Reset',
      saving: 'Saving...',
      saveSettings: 'Save Settings',
      generalSettings: 'General Settings',
      notificationSettings: 'Notification Settings',
      privacySettings: 'Privacy Settings',
      investmentSettings: 'Investment Preferences',
      displaySettings: 'Display Settings',
      currencySettings: 'Currency Settings',
      baseCurrency: 'Base Currency',
      currencyRates: 'Exchange Rates',
      totalDomains: 'Total Domains',
      active: 'Active',
      sold: 'Sold',
      totalInvestment: 'Total Investment',
      average: 'Average',
      averageSalePrice: 'Average Sale Price',
      renewalCost: 'Renewal Cost',
      annualCost: 'Annual Cost',
      totalHoldingCost: 'Total Holding Cost',
      purchaseRenewal: 'Purchase + Renewal',
      renewalCount: 'Renewal Count',
      renewals: 'renewals',
      saleDate: 'Sale Date',
      salePrice: 'Sale Price',
      profit: 'Profit',
      shareResults: 'Share Investment Results',
      bestPerformance: 'Best Performance',
      bestInvestment: 'Best Investment Domain',
      needAttention: 'Need Attention',
      expiringSoon: 'Expiring Soon',
      quickActions: 'Quick Actions',
      addDomain: 'Add Domain',
      addTransaction: 'Add Transaction'
    },
    common: {
      search: 'Search',
      filter: 'Filter',
      sort: 'Sort',
      view: 'View',
      grid: 'Grid',
      list: 'List',
      all: 'All',
      active: 'Active',
      forSale: 'For Sale',
      sold: 'Sold',
      expired: 'Expired',
      critical: 'Critical',
      urgent: 'Urgent',
      normal: 'Normal',
      today: 'Today',
      daysLeft: 'days left',
      expiredDays: 'Expired',
      edit: 'Edit',
      renew: 'Renew',
      delete: 'Delete',
      save: 'Save',
      cancel: 'Cancel',
      confirm: 'Confirm',
      close: 'Close',
      loading: 'Loading...',
      noData: 'No data',
      addFirst: 'Add first',
      recentTransactions: 'Recent Transactions',
      expiringDomains: 'Expiring Domains',
      noExpiringDomains: 'No expiring domains',
      noTransactions: 'No transaction records',
      addFirstTransaction: 'Add first transaction',
      financialReports: 'Financial Reports',
      gridView: 'Grid View',
      listView: 'List View',
      dataSource: 'Data Source',
      cloudDatabase: 'Cloud Database',
      cache: 'Cache',
      verifyingIdentity: 'Verifying your identity...',
      searchDomains: 'Search domains...',
      sortByDate: 'By Date',
      sortByName: 'By Name',
      sortByValue: 'By Value',
      // Sale Success Modal
      saleSuccess: 'Sale Successful!',
      domainSoldSuccessfully: 'has been successfully sold',
      netProfit: 'Net Profit',
      returnOnInvestment: 'Return on Investment',
      holdingPeriod: 'Holding Period',
      shareImagePreview: 'Share Image Preview',
      generating: 'Generating...',
      generateShareImage: 'Generate Share Image',
      shareToSocialMedia: 'Share to Social Media',
      downloadImage: 'Download Image',
      wechat: 'WeChat',
      copiedToClipboard: 'Content copied to clipboard, you can paste it to WeChat',
      days: 'days',
      months: 'months',
      years: 'years',
      year: 'year',
      month: 'month',
      domainInvestmentSuccess: 'Share Domain Investment Success',
      imagePreview: 'Share Image Preview',
      sortByCost: 'By Cost',
      allStatus: 'All Status',
      activeStatus: 'Active',
      forSaleStatus: 'For Sale',
      soldStatus: 'Sold',
      expiredStatus: 'Expired',
      profit: 'Profit',
      daysUntilExpiry: 'Days Until Expiry',
      todayExpiry: 'Expires today',
      expiredDaysAgo: 'Expired',
      daysLeftExpiry: 'days left',
      daysLeftExpiryEnd: 'days left',
      renewalNote: 'Domain {domain} renewed for {cycle} year(s)',
      domainStatusUpdated: 'Domain status automatically updated to "sold"',
      dataLoadFailed: 'Failed to load data from database. Please try again.',
      dataSaveFailed: 'Failed to save data to database. Please try again.',
      dataImportFailed: 'Failed to import data',
      dataExportFailed: 'Failed to export data',
      dataBackupFailed: 'Failed to backup data',
      dataRestoreFailed: 'Failed to restore data',
      dataImportedSuccessfully: 'Data imported successfully',
      dataExportedSuccessfully: 'Data exported successfully',
      dataBackedUpSuccessfully: 'Data backed up successfully',
      dataRestoredSuccessfully: 'Data restored successfully'
    },
    financial: {
      totalSales: 'Total Sales',
      totalSalesDesc: 'Before any deductions',
      platformFees: 'Platform Fees',
      platformFeesDesc: 'Total fees',
      annualSales: 'Annual Sales',
      annualSalesDesc: 'This year sales',
      annualProfit: 'Annual Net Profit',
      annualProfitDesc: 'After all costs',
      newFinancialMetrics: 'New Financial Metrics Cards'
    },
    renewal: {
      analysis: 'Annual Renewal Analysis',
      thisYearCost: 'This Year Renewal Cost',
      needRenewal: 'Domains Need Renewal',
      noRenewal: 'No Renewal Needed',
      averageCostPerDomain: 'Average Cost per Domain',
      cycleDistribution: 'Renewal Cycle Distribution',
      optimizationSuggestions: 'Renewal Optimization Suggestions',
      year: 'year',
      domains: 'domains',
      cost: 'cost',
      suggestion: 'suggestion'
    },
    transaction: {
      type: 'Transaction Type',
      amount: 'Amount',
      currency: 'Currency',
      date: 'Date',
      notes: 'Notes',
      platform: 'Platform',
      category: 'Category',
      taxDeductible: 'Tax Deductible',
      receiptUrl: 'Receipt URL',
      exchangeRate: 'Exchange Rate',
      baseAmount: 'Base Amount',
      platformFee: 'Platform Fee',
      platformFeePercentage: 'Platform Fee %',
      netAmount: 'Net Amount',
      buy: 'Buy',
      renew: 'Renew',
      sell: 'Sell',
      transfer: 'Transfer',
      fee: 'Fee',
      marketing: 'Marketing',
      advertising: 'Advertising',
      installmentConfig: 'Installment Configuration',
      paymentPlan: 'Payment Plan',
      lumpSum: 'Lump Sum',
      installment: 'Installment',
      installmentPeriod: 'Installment Periods',
      downpaymentAmount: 'Downpayment Amount',
      installmentAmount: 'Installment Amount',
      finalPaymentAmount: 'Final Payment Amount',
      installmentSummary: 'Installment Summary',
      downpayment: 'Downpayment',
      installmentPeriods: 'Periods',
      regularInstallment: 'Regular Installment',
      finalPayment: 'Final Payment',
      totalInstallment: 'Total Installment',
      domainAlreadyExists: 'Domain Already Exists',
      domainAlreadyExistsDesc: 'This domain name is already in your portfolio',
      selectDomain: 'Select a domain',
      active: 'Active',
      forSale: 'For Sale',
      exchangeRateInfo: 'Exchange Rate Info',
      exchangeRateDesc: 'Exchange Rate',
      equivalentAmount: 'Equivalent',
      netIncomeCalculation: 'Net Income Calculation',
      totalAmount: 'Total Amount',
      platformFeeDesc: 'Platform Fee',
      netIncome: 'Net Income',
      holding: 'Holding',
      addTransaction: 'Add Transaction',
      add: 'Add Transaction',
      editTransaction: 'Edit Transaction',
      saveTransaction: 'Save Transaction',
      cancelTransaction: 'Cancel Transaction',
      deleteTransaction: 'Delete Transaction',
      confirmDelete: 'Confirm Delete',
      transactionDetails: 'Transaction Details',
      financialFields: 'Financial Fields',
      netIncomeDisplay: 'Net Income Display',
      year: 'y',
      month: 'm',
      day: 'd',
      shortTerm: 'Short Term',
      mediumTerm: 'Medium Term',
      longTerm: 'Long Term',
      veryLongTerm: 'Very Long Term'
    },
    analytics: {
      totalInvestment: 'Total Investment',
      totalRevenue: 'Total Revenue',
      netProfit: 'Net Profit',
      totalReturn: 'Total Return',
      annualizedReturn: 'Annualized Return',
      sharpeRatio: 'Sharpe Ratio',
      portfolioPerformance: 'Portfolio Performance',
      investment: 'Investment',
      revenue: 'Revenue',
      profit: 'Profit',
      portfolioValue: 'Portfolio Value',
      riskMetrics: 'Risk Metrics',
      riskLevel: 'Risk Level',
      diversificationScore: 'Diversification Score',
      concentrationRisk: 'Concentration Risk',
      liquidityRisk: 'Liquidity Risk',
      investmentAdvice: 'Investment Advice',
      portfolioPerformingWell: 'Portfolio performing well with good risk control',
      monthlyReturnTrend: 'Monthly Return Trend',
      monthlyReturn: 'Monthly Return',
      domainSuffixAnalysis: 'Domain Suffix Analysis',
      heldDomainSuffix: 'Held Domain Suffix Distribution',
      soldDomainSuffix: 'Sold Domain Suffix Distribution',
      detailedStats: 'Detailed Statistics',
      noHeldDomains: 'No held domain data',
      noSoldDomains: 'No sold domain data',
      suffixComparison: 'Suffix Comparison Analysis',
      heldDomainRanking: 'Held Domain Suffix Ranking',
      soldDomainRanking: 'Sold Domain Suffix Ranking',
      investmentDistribution: 'Investment Distribution',
      activeDomains: 'Active Domains',
      forSaleDomains: 'For Sale Domains',
      soldDomains: 'Sold Domains',
      expiredDomains: 'Expired Domains',
      analysisTypeSelector: 'Analysis Type Selector',
      lowRisk: 'Low Risk',
      mediumRisk: 'Medium Risk',
      highRisk: 'High Risk',
      veryHighRisk: 'Very High Risk',
      considerDiversification: 'Consider diversifying investments to reduce single domain concentration',
      highVolatility: 'Portfolio volatility is high, consider adding stable income domains',
      lowLiquidity: 'Insufficient liquidity, consider increasing the number of domains for sale',
      lowDiversity: 'Few domains, consider increasing portfolio diversity',
      // Expired Domain Loss Analysis
      expiredDomainLoss: 'Expired Domain Loss Analysis',
      expiredDomainLossDesc: 'Investment losses due to domain expiration without renewal',
      totalLoss: 'Total Loss',
      expiredDomainsCount: 'Expired Domains',
      averageLossPerDomain: 'Avg Loss/Domain',
      annualLossTrend: 'Annual Loss Trend',
      domains: 'domains',
      expiredDomainsDetails: 'Expired Domains Details',
      noExpiredDomains: 'No Expired Domains',
      noExpiredDomainsDesc: 'Congratulations! You have no losses from expired domains'
    },
    auth: {
      signIn: {
        title: 'Sign in to your account',
        button: 'Sign In',
        loading: 'Signing in...'
      },
      signInButton: 'Sign In',
      signInLoading: 'Signing in...',
      email: 'Email Address',
      emailPlaceholder: 'Enter your email address',
      password: 'Password',
      passwordPlaceholder: 'Enter your password',
      noAccount: "Don't have an account?",
      signUpNow: 'Sign up now',
      signUp: {
        title: 'Create your account',
        button: 'Sign Up',
        loading: 'Creating account...'
      },
      magicLink: {
        title: 'Magic Link Login',
        subtitle: 'Enter your email address and we\'ll send you a login link',
        email: 'Email address',
        emailPlaceholder: 'Enter your email address',
        submit: 'Send Magic Link',
        sending: 'Sending...',
        success: 'Magic Link sent to your email! Please check your inbox and click the link to login.',
        error: 'Failed to send Magic Link, please try again',
        firstTime: 'First time? Magic Link will automatically create an account for you',
        verifying: 'Verifying your login link...',
        loginSuccess: 'Login successful! Redirecting to your dashboard...',
        loading: 'Loading...',
        invalidLink: 'Invalid login link. Please access through the link in your email.',
        loginFailed: 'Login failed, please try again',
        returnToLogin: 'Return to login page'
      },
      verify: {
        title: 'Verify Email',
        subtitle: 'We have sent a verification code to {email}',
        code: 'Verification Code',
        codeHint: 'Please enter 6-digit verification code',
        submit: 'Verify Email',
        verifying: 'Verifying...',
        resend: 'Didn\'t receive the code? Resend',
        backToLogin: 'Back to login',
        backToRegister: 'Back to register',
        invalidCode: 'Please enter 6-digit verification code',
        emailNotFound: 'Email address not found, please register again',
        verificationFailed: 'Verification failed',
        wrongCode: 'Wrong verification code',
        updateUserFailed: 'Failed to update user status',
        resendFailed: 'Resend failed, please try again',
        sendFailed: 'Send failed'
      },
      registrationSuccess: 'Registration successful!',
      redirecting: 'Redirecting to verification page...',
      passwordsNotMatch: 'Passwords do not match',
      passwordTooShort: 'Password must be at least 8 characters',
      passwordMinLength: 'At least 8 characters',
      confirmPassword: 'Confirm Password',
      confirmPasswordPlaceholder: 'Enter password again',
      signUpLoading: 'Creating account...',
      signUpButton: 'Sign Up',
      hasAccount: 'Already have an account?',
      signInNow: 'Sign in now'
    },
    monitoring: {
      title: 'Domain Expiry Monitoring',
      notificationTitle: '66Do Domain Alert',
      startMonitoring: 'Start Monitoring',
      stopMonitoring: 'Stop Monitoring',
      checkNow: 'Check Now',
      expired: 'Expired',
      critical: 'Critical',
      urgent: 'Urgent',
      warning: 'Warning',
      currentAlerts: 'Current Alerts',
      lastCheck: 'Last Check',
      criticalDomainsAlert: '{count} domains are about to expire!',
      urgentDomainsAlert: '{count} domains need attention!',
      analysisFailed: 'Failed to analyze domain expiry',
      whoisSyncComplete: 'WHOIS sync completed: Updated {updated} domains, {errors} errors',
      whoisSyncFailed: 'WHOIS sync failed',
      suggestRefreshData: 'Suggest refreshing domain data to get latest WHOIS information'
    },
    alerts: {
      domainExpiryCritical: 'Domain {domain} will expire in {days} days! Please renew immediately.',
      domainExpiryUrgent: 'Domain {domain} will expire in {days} days, please renew soon.',
      domainExpiryWarning: 'Domain {domain} will expire in {days} days.',
      allDomainsNormal: 'All domains are in normal status',
      renewalCost: 'Renewal Cost',
      renewalCycle: 'Renewal Cycle',
      renewNow: 'Renew Now',
      remindLater: 'Remind Later'
    },
    domain: {
      expiryMonitoring: 'Domain Expiry Monitoring',
      syncWhois: 'Sync WHOIS',
      totalExpiring: 'Expiring Soon',
      critical: 'Critical',
      high: 'High',
      medium: 'Medium',
      low: 'Low',
      lastUpdate: 'Last Update',
      whoisVerified: 'WHOIS Verified',
      expiringDomains: 'Expiring Domains',
      noExpiringDomains: 'No expiring domains',
      registrar: 'Registrar',
      renewNow: 'Renew Now',
      add: 'Add Domain'
    },
    mobile: {
      menu: 'Menu',
      close: 'Close',
      swipeToNavigate: 'Swipe to navigate',
      tapToExpand: 'Tap to expand',
      pullToRefresh: 'Pull to refresh'
    },
    gesture: {
      swipeLeft: 'Swipe left',
      swipeRight: 'Swipe right',
      pullDown: 'Pull down',
      pullUp: 'Pull up'
    },
    responsive: {
      mobileView: 'Mobile view',
      tabletView: 'Tablet view',
      desktopView: 'Desktop view'
    },
    touch: {
      tap: 'Tap',
      doubleTap: 'Double tap',
      longPress: 'Long press',
      swipe: 'Swipe'
    },
    stats: {
      totalUsers: 'Active Users',
      portfolioValue: 'Portfolio Value',
      domainsManaged: 'Domains Managed',
      free: 'Free to Use',
      investmentCount: 'Investment Count'
    },
    home: {
      title: '66Do-Domain Investment Platform',
      subtitle: 'Intelligent domain management tools to help you easily track the cost, revenue and performance of each domain.',
      getStarted: 'Get Started',
      startJourney: 'Start Your Domain Investment Journey',
      joinThousands: 'Join domain investors using 66Do to track their domain portfolios',
      startFree: 'Start Free',
      feature1: 'Start with one domain and manage your digital assets.',
      feature2: 'Track purchases, sales, and expiration dates.',
      feature3: 'Users are already using it to manage their domain collections.',
      feature4: 'Free to use, continuously improving.'
    },
    features: {
      title: 'Core Features',
      subtitle: 'Intelligent management tools designed for domain holders',
      portfolio: {
        title: 'Domain Portfolio Management',
        desc: 'Comprehensive recording and tracking of your domains with easy status monitoring'
      },
      analytics: {
        title: 'Data Analysis',
        desc: 'Visual analysis of domain performance to help you make better planning decisions'
      },
      data: {
        title: 'Smart Insights',
        desc: 'Discover potential opportunities and risks through data trends'
      },
      security: {
        title: 'Data Security',
        desc: 'Encrypted storage and isolation mechanisms to protect your information security'
      }
    },
    benefits: {
      title: 'Why Choose Us',
      subtitle: 'Simple and intelligent domain management and analysis tools',
      portfolio: {
        title: 'Domain Management',
        desc: 'Unified recording and tracking of all domain statuses'
      },
      analytics: {
        title: 'Data Overview',
        desc: 'Understand your domain performance at a glance'
      },
      market: {
        title: 'Inspiration & Trends',
        desc: 'Optimize costs and discover buying and selling opportunities'
      }
    },
    footer: {
      description: 'Professional domain investment management platform, helping investors track portfolios, analyze data, and optimize returns.',
      product: 'Product',
      investmentManagement: 'Investment Management',
      dataAnalytics: 'Data Analytics',
      performanceTracking: 'Performance Tracking',
      support: 'Support',
      helpCenter: 'Help Center',
      contactUs: 'Contact Us',
      privacyPolicy: 'Privacy Policy',
      contact: 'Contact'
    }
  }
};

// 获取嵌套对象的值
function getNestedValue(obj: Record<string, unknown>, path: string): string {
  const keys = path.split('.');
  let current: unknown = obj;
  
  for (const key of keys) {
    if (current && typeof current === 'object' && current !== null && key in current) {
      current = (current as Record<string, unknown>)[key];
    } else {
      return path; // 如果路径不存在，返回原始键
    }
  }
  
  return typeof current === 'string' ? current : path;
}

export function useI18n() {
  const [locale, setLocale] = useState<Locale>('zh');
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    // 从localStorage获取保存的语言设置
    const savedLocale = localStorage.getItem('66do-locale') as Locale;
    if (savedLocale && (savedLocale === 'zh' || savedLocale === 'en')) {
      setLocale(savedLocale);
    } else {
      // 检测浏览器语言
      const browserLang = navigator.language || navigator.languages?.[0] || 'en';
      const detectedLocale = browserLang.startsWith('zh') ? 'zh' : 'en';
      setLocale(detectedLocale);
    }
    setIsLoading(false);
  }, []);

  const changeLocale = (newLocale: Locale) => {
    setLocale(newLocale);
    localStorage.setItem('66do-locale', newLocale);
  };

  const t = (key: string): string => {
    if (isLoading) return key;
    return getNestedValue(translations[locale], key);
  };

  return {
    locale,
    setLocale: changeLocale,
    t,
    isLoading
  };
}
